(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[752],{2553:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5155),a=r(2115),i=r(5695),n=r(6956),u=r.n(n);function c(){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{className:u().loading,children:"Loading verification..."}),children:(0,s.jsx)(o,{})})}function o(){let e=(0,i.useSearchParams)(),t=(0,i.useRouter)(),r=e.get("email")||"",[n,c]=(0,a.useState)(""),[o,l]=(0,a.useState)(!1),[p,d]=(0,a.useState)(""),[f,_]=(0,a.useState)(""),h=async e=>{e.preventDefault(),l(!0),d(""),_("");try{if(!(await fetch("https://api.digitalmerkato.com.et/api/verifyOTP/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,otp:n})})).ok)throw Error("Invalid OTP");_("OTP verified successfully!"),t.push("/login/change-password?email=".concat(encodeURIComponent(r)))}catch(e){d(e instanceof Error?e.message:"Verification failed.")}finally{l(!1)}};return(0,s.jsxs)("div",{className:u().container,children:[(0,s.jsx)("h2",{className:u().header,children:"Verify OTP"}),f&&(0,s.jsx)("p",{className:u().success,children:f}),p&&(0,s.jsx)("p",{className:u().error,children:p}),(0,s.jsxs)("form",{onSubmit:h,className:u().form,children:[(0,s.jsxs)("div",{className:u().inputGroup,children:[(0,s.jsxs)("label",{className:u().label,children:["Enter the OTP sent to ",r]}),(0,s.jsx)("input",{type:"text",className:u().input,value:n,onChange:e=>c(e.target.value),placeholder:"Enter 6-digit OTP",required:!0,maxLength:6,pattern:"\\d{6}",title:"Please enter a 6-digit number"})]}),(0,s.jsx)("button",{type:"submit",className:u().button,disabled:o,children:o?"Verifying...":"Verify OTP"})]})]})}},5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},6956:e=>{e.exports={container:"VerifyOtp_container__DauNM",header:"VerifyOtp_header__tq_a7",success:"VerifyOtp_success__Cwoze",error:"VerifyOtp_error__DYOW6",form:"VerifyOtp_form__gXvrR",inputGroup:"VerifyOtp_inputGroup__82jQf",label:"VerifyOtp_label__ZED1D",input:"VerifyOtp_input__ksM7t",button:"VerifyOtp_button__St_Er"}},9085:(e,t,r)=>{Promise.resolve().then(r.bind(r,2553))}},e=>{var t=t=>e(e.s=t);e.O(0,[571,441,684,358],()=>t(9085)),_N_E=e.O()}]);