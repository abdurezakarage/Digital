(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[993],{5376:(e,s,a)=>{Promise.resolve().then(a.bind(a,8458))},7325:e=>{e.exports={adminContainer:"AdminMessage_adminContainer___zaew",header:"AdminMessage_header__xROoH",messageCount:"AdminMessage_messageCount__ur_NU",messagesGrid:"AdminMessage_messagesGrid__YZ7bs",messageCard:"AdminMessage_messageCard__e_43B",read:"AdminMessage_read___qE7l",messageHeader:"AdminMessage_messageHeader__wMRSb",messageEmail:"AdminMessage_messageEmail__rWrwp",messageDate:"AdminMessage_messageDate__yCBBr",messageBody:"AdminMessage_messageBody__LhdF3",messageSubject:"AdminMessage_messageSubject__axmmf",messageContent:"AdminMessage_messageContent__Gmq_g",loadingState:"AdminMessage_loadingState__6lss0",errorState:"AdminMessage_errorState__9QyY7",emptyState:"AdminMessage_emptyState__GjKRX",spinner:"AdminMessage_spinner__nZq2V",spin:"AdminMessage_spin__5nVn1",retryButton:"AdminMessage_retryButton__hZ8e1"}},8458:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o});var n=a(5155),i=a(2115),t=a(7325),r=a.n(t),d=a(9509);let o=()=>{let[e,s]=(0,i.useState)([]),[a,t]=(0,i.useState)(!0),[o,m]=(0,i.useState)(null);return((0,i.useEffect)(()=>{let e=d.env.NEXT_PUBLIC_BACKEND_URL;if(!e){m("Backend URL is not defined"),t(!1);return}(async()=>{let a=localStorage.getItem("accessToken");if(!a){m("You are not logged in as admin."),t(!1);return}try{let n=await fetch("".concat(e,"/api/notifications/list/"),{headers:{Authorization:"Bearer ".concat(a)}});if(!n.ok)throw Error("Error: ".concat(n.status));let i=await n.json();s(i)}catch(e){console.error("Failed to fetch notifications:",e),m(e instanceof Error?e.message:"Unknown error")}finally{t(!1)}})()},[]),a)?(0,n.jsx)("div",{className:r().adminContainer,children:(0,n.jsx)("p",{children:"Loading notifications..."})}):o?(0,n.jsxs)("div",{className:r().adminContainer,children:[(0,n.jsxs)("p",{children:["Error loading notifications: ",o]}),(0,n.jsx)("button",{onClick:()=>location.reload(),children:"Retry"})]}):(0,n.jsxs)("div",{className:r().adminContainer,children:[(0,n.jsx)("h1",{children:"User Notifications"}),e.length>0?(0,n.jsx)("div",{className:r().messagesGrid,children:e.map(e=>(0,n.jsxs)("div",{className:r().messageCard,children:[(0,n.jsxs)("div",{className:r().messageHeader,children:[(0,n.jsx)("div",{children:new Date(e.created_at).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}),(0,n.jsx)("h3",{children:e.full_name}),(0,n.jsx)("p",{className:r().messageEmail,children:e.email})]}),(0,n.jsxs)("div",{className:r().messageBody,children:[e.title&&(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Title:"})," ",e.title]}),(0,n.jsx)("p",{children:e.message})]})]},e.email))}):(0,n.jsx)("p",{children:"No notifications found"})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[246,441,684,358],()=>s(5376)),_N_E=e.O()}]);